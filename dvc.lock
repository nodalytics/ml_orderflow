schema: '2.0'
stages:
  ingest:
    cmd: uv run python -m trend_analysis.pipelines.data_ingestion
    deps:
    - path: trend_analysis/pipelines/data_ingestion.py
      hash: md5
      md5: 18a4e49ae93652c31f9d8d9f743ce92b
      size: 11531
    outs:
    - path: data/raw
      hash: md5
      md5: 9477bb83ed9a22c08f2b3072735d0662.dir
      size: 804849
      nfiles: 1
  preprocess:
    cmd: uv run python -m trend_analysis.pipelines.preprocess
    deps:
    - path: data/raw
      hash: md5
      md5: 9477bb83ed9a22c08f2b3072735d0662.dir
      size: 804849
      nfiles: 1
    - path: trend_analysis/pipelines/preprocess.py
      hash: md5
      md5: f8713eefaa701d2493769d3e1d620dc2
      size: 18816
    params:
      params.yaml:
        preprocessing:
          processed_data_path: data/processed
          lrc_period: 100
          volatility_windows:
          - 7
          - 24
          sma_windows:
          - 20
          - 50
          rsi_window: 14
          target_window: 1
          min_bars: 150
          enable_multivariate: false
          multivariate_config:
            target_timeframe: H1
            target_symbol: ETHUSD
            context:
              BTCUSD:
              - H1
              - H4
              GBPUSD:
              - H1
              ETHUSD:
              - H4
    outs:
    - path: data/processed
      hash: md5
      md5: f24a6a0464a7e2d09585301542b33266.dir
      size: 4379407
      nfiles: 1
  train:
    cmd: uv run python -m trend_analysis.pipelines.train
    deps:
    - path: data/processed
      hash: md5
      md5: f24a6a0464a7e2d09585301542b33266.dir
      size: 4379407
      nfiles: 1
    - path: trend_analysis/pipelines/train.py
      hash: md5
      md5: c31b6438578544afdcd86880240bed4f
      size: 7891
    params:
      params.yaml:
        mlflow:
          tracking_uri: sqlite:///mlflow.db
          experiment_name: trend-analysis
          model_registry_name: trend-analysis
        train:
          model_name: trend_analysis_model
          model_type: xgboost
          freq: h
          lags:
          - 1
          - 7
          - 24
          target_col: target_next_return
          forecast_horizon: 4
          input_size: 128
          epochs: 10
          batch_size: 32
          learning_rate: 0.001
          use_static_features: true
    outs:
    - path: models/trend_analysis_model.pkl
      hash: md5
      md5: 70ddc22f47236ac5a69d002d7db60cbe
      size: 389189
  inference:
    cmd: uv run python -m trend_analysis.pipelines.inference
    deps:
    - path: data/processed
      hash: md5
      md5: f24a6a0464a7e2d09585301542b33266.dir
      size: 4379407
      nfiles: 1
    - path: models/trend_analysis_model.pkl
      hash: md5
      md5: 70ddc22f47236ac5a69d002d7db60cbe
      size: 389189
    - path: trend_analysis/pipelines/inference.py
      hash: md5
      md5: f19fd1189b8f91306cd50826ae48e046
      size: 5596
    outs:
    - path: data/results/inferences.csv
      hash: md5
      md5: 07f2856f51225d5427c9a56a03b4c074
      size: 2172
